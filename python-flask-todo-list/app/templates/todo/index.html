{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}TODO{% endblock %}</h1>
  {% if session['token'] %}
    <a class="action" href="{{ url_for('todo.create') }}">New</a>
  {% endif %}
{% endblock %}

{% block content %}
<table>
    <!--id, task_name, status, created, due_date-->
<tr>
    <th>created</th>
    <th>updated</th>
    <th>creator</th>
    <th>task name</th>
    <th>status</th>
    <th>due date</th>
    {% if session['token'] %}
      <th>edit</th>
    {% endif %}
</tr>
  {% for todo in todos %}
  <tr>
      <td>{{ todo['created'] }}</td>
      <td>{{ todo['updated'] }}</td>
      <td>{{ todo['properties']['creator'] }}</td>
      <td>{{ todo['properties']['task_name'] }}</td>
      <td>{{ todo['properties']['status'] }}</td>
      <td>{{ todo['properties']['due_date'] }}</td>
      {% if session['token'] %}
        <td> <a class="action" href="{{ url_for('todo.update', id=todo['id']) }}">Edit</a></td>
      {% endif %}
  </tr>  
  {% endfor %}
</table>
{% endblock %}